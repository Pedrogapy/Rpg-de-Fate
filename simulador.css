:root{
  --bg:#0f0f12;
  --panel:#16161d;
  --panel2:#1c1c26;
  --text:#e8e8ea;
  --muted:#b8b8c5;
  --line:#2a2a38;

  --quick:#31d17d;
  --arts:#58a6ff;
  --buster:#ff4d4d;

  --shadow: 0 14px 40px rgba(0,0,0,.45);
  --radius: 18px;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(1200px 800px at 50% -20%, rgba(88,166,255,.18), transparent 60%),
              radial-gradient(900px 600px at 100% 20%, rgba(49,209,125,.12), transparent 55%),
              radial-gradient(900px 600px at 0% 60%, rgba(255,77,77,.10), transparent 55%),
              var(--bg);
  color:var(--text);
  line-height:1.5;
}

.wrap{max-width:1080px;margin:0 auto;padding:18px}

.top{
  position:sticky;top:0;z-index:9;
  backdrop-filter: blur(10px);
  background: rgba(15,15,18,.75);
  border-bottom:1px solid rgba(42,42,56,.8);
}

.brand{display:flex;gap:14px;align-items:center}
.logo{
  width:44px;height:44px;border-radius:14px;
  display:grid;place-items:center;
  background: linear-gradient(145deg, rgba(88,166,255,.35), rgba(49,209,125,.20));
  border:1px solid rgba(255,255,255,.08);
  box-shadow: var(--shadow);
  font-weight:800;
}

h1{margin:0;font-size:18px}
.top p{margin:2px 0 0;color:var(--muted);font-size:13px}

.nav{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
.nav a{
  color:var(--text);text-decoration:none;
  padding:8px 10px;border-radius:12px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(22,22,29,.55);
}
.nav a:hover{border-color:rgba(255,255,255,.18)}

h2{margin:0 0 10px}
h3{margin:10px 0 8px}
.muted{color:var(--muted);margin:0 0 14px}
.panel{
  background: linear-gradient(180deg, rgba(22,22,29,.92), rgba(22,22,29,.70));
  border:1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  padding:16px;
  box-shadow: var(--shadow);
}

.grid2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:16px;
}
@media (max-width: 900px){
  .grid2{grid-template-columns:1fr}
}

.controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:12px}
.btn{
  border:1px solid rgba(255,255,255,.10);
  background: rgba(28,28,38,.85);
  color:var(--text);
  padding:10px 12px;
  border-radius:14px;
  cursor:pointer;
  transition: transform .06s ease, border-color .2s ease, background .2s ease;
}
.btn:hover{border-color: rgba(255,255,255,.22)}
.btn:active{transform: translateY(1px)}
.btn:disabled{opacity:.45;cursor:not-allowed}

.btn.primary{
  background: linear-gradient(145deg, rgba(88,166,255,.25), rgba(49,209,125,.18));
  border-color: rgba(159,180,255,.25);
}

.toggle{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:14px}
.toggle input{transform: translateY(1px)}

.deckArea{display:flex;flex-direction:column;gap:12px}
.deck{
  position:relative;
  height:220px;
  border-radius: var(--radius);
  border:1px dashed rgba(255,255,255,.12);
  background: rgba(28,28,38,.35);
  overflow:hidden;
}

.cardBack{
  position:absolute;left:26px;top:42px;
  width:140px;height:190px;border-radius:18px;
  background:
    radial-gradient(500px 200px at 10% 10%, rgba(88,166,255,.24), transparent 60%),
    radial-gradient(500px 200px at 90% 90%, rgba(49,209,125,.18), transparent 60%),
    linear-gradient(160deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
.cardBack:nth-child(2){left:34px;top:34px}
.cardBack:nth-child(3){left:42px;top:26px}

.flyingCard{
  position:absolute;
  left: 42px;
  top: 26px;
  width:140px;height:190px;
  border-radius:18px;
  opacity:0;
  transform: translateX(0) rotate(-2deg);
  pointer-events:none;
}
.flyingCard .cardFace{
  width:100%;height:100%;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.14);
  background: linear-gradient(160deg, rgba(255,255,255,.12), rgba(255,255,255,.03));
  box-shadow: 0 16px 40px rgba(0,0,0,.45);
  padding:14px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
}
.cardTitle{font-weight:700;color:rgba(255,255,255,.85)}
.cardType{font-size:26px;font-weight:900;letter-spacing:.5px}
.cardMark{color:rgba(255,255,255,.55);font-weight:700}

.deck.isDrawing .flyingCard{
  opacity:1;
  animation: fly 950ms ease forwards;
}
@keyframes fly{
  0%{transform: translateX(0) rotate(-2deg)}
  35%{transform: translateX(180px) rotate(8deg)}
  65%{transform: translateX(520px) rotate(-3deg)}
  100%{transform: translateX(520px) rotate(0deg)}
}

.bigCard{
  height:220px;
  border-radius: var(--radius);
  border:1px solid rgba(255,255,255,.10);
  background: rgba(28,28,38,.35);
  display:flex;
  align-items:stretch;
  overflow:hidden;
}
.bigCard.empty{opacity:.92}
.bigCardInner{padding:16px;display:flex;flex-direction:column;justify-content:space-between;width:100%}

.bigCardTop{display:flex;flex-direction:column;gap:6px}
.bigCardBadge{
  display:inline-flex;
  width:max-content;
  padding:6px 10px;
  border-radius:999px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  color:rgba(255,255,255,.82);
  font-weight:700;
  font-size:13px;
}
.bigCardSubtitle{color:var(--muted);font-size:13px}

.bigCardType{font-size:40px;font-weight:950;letter-spacing:.6px}
.bigCardFooter{color:rgba(255,255,255,.60);font-weight:700}

.bigCard.quick{background: radial-gradient(500px 220px at 15% 20%, rgba(49,209,125,.25), transparent 55%), rgba(28,28,38,.35)}
.bigCard.arts{background: radial-gradient(500px 220px at 15% 20%, rgba(88,166,255,.25), transparent 55%), rgba(28,28,38,.35)}
.bigCard.buster{background: radial-gradient(500px 220px at 15% 20%, rgba(255,77,77,.22), transparent 55%), rgba(28,28,38,.35)}

.hint{margin-top:12px;color:rgba(255,255,255,.62);font-size:13px}

.diceRow{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;padding:10px 0}
.dieBox{display:flex;flex-direction:column;gap:8px;align-items:center;min-width:110px}
.dieLabel{color:var(--muted);font-weight:700}
.die{
  width:92px;height:92px;
  border-radius:22px;
  display:grid;place-items:center;
  background: linear-gradient(160deg, rgba(255,255,255,.11), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 14px 30px rgba(0,0,0,.35);
  font-size:30px;
  font-weight:950;
  letter-spacing:.5px;
  user-select:none;
}
.die.rolling{animation: shake 420ms ease-in-out infinite}
@keyframes shake{
  0%{transform: rotate(0deg) translateY(0)}
  25%{transform: rotate(2deg) translateY(-1px)}
  50%{transform: rotate(0deg) translateY(1px)}
  75%{transform: rotate(-2deg) translateY(-1px)}
  100%{transform: rotate(0deg) translateY(0)}
}

.choice{margin-top:14px;padding-top:12px;border-top:1px solid rgba(255,255,255,.08)}
.hidden{display:none}

.preChoiceInfo{
  margin:10px 0 12px;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(28,28,38,.45);
}
.preTitle{
  font-weight:900;
  color: rgba(255,255,255,.85);
  margin-bottom:6px;
}
.preLines{
  color: rgba(255,255,255,.70);
  font-size:13px;
  white-space:pre-line;
}

.choiceGrid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media (max-width: 700px){.choiceGrid{grid-template-columns:1fr}}

.choiceBtn{
  text-align:left;
  padding:12px;
  background: rgba(28,28,38,.75);
}
.choiceBtn strong{display:block;font-size:14px;margin-bottom:6px}
.choiceBtn span{display:block;color:var(--muted);font-size:13px}

.resultBlock{display:flex;flex-direction:column;gap:6px}
.resultTitle{color:var(--muted);font-weight:800;letter-spacing:.4px}
.resultMain{font-size:18px;font-weight:900}
.resultSub{color:rgba(255,255,255,.68);font-size:13px}

.divider{height:1px;background:rgba(255,255,255,.08);margin:14px 0}

.resultDetails{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap:10px;
}
.detail{
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
  padding:10px;
  background: rgba(28,28,38,.45);
}
.k{color:var(--muted);font-weight:800;font-size:12px}
.v{font-weight:800;margin-top:4px}

.note{margin-top:12px;color:rgba(255,255,255,.62);font-size:13px}

.footer{
  margin-top:26px;
  border-top:1px solid rgba(255,255,255,.08);
  color:rgba(255,255,255,.55);
  font-size:13px;
  background: rgba(15,15,18,.6);
}

.tables{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:14px}
@media (max-width: 900px){.tables{grid-template-columns:1fr}}
details summary{
  cursor:pointer;
  padding:10px 12px;
  border-radius:14px;
  background: rgba(28,28,38,.55);
  border:1px solid rgba(255,255,255,.08);
  width:max-content;
}


/* ============================
   Mão de cartas (até 7)
============================ */
.handGrid{
  display:grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap:12px;
}
@media (max-width: 720px){
  .handGrid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}

.handCard{
  position:relative;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.08);
  background: linear-gradient(160deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  padding:12px;
  cursor:pointer;
  overflow:hidden;
  min-height:86px;
  box-shadow: 0 10px 28px rgba(0,0,0,.25);
  transition: transform .14s ease, border-color .14s ease, box-shadow .14s ease;
}
.handCard:hover{
  transform: translateY(-2px);
  border-color: rgba(255,255,255,.14);
  box-shadow: 0 14px 36px rgba(0,0,0,.35);
}
.handCard.selected{
  outline: 2px solid rgba(255,255,255,.20);
  border-color: rgba(255,255,255,.20);
}
.handCard.emptySlot{
  cursor:default;
  opacity:.38;
}
.handGlow{
  position:absolute; inset:-60px;
  background: radial-gradient(200px 140px at 20% 20%, rgba(255,255,255,.12), transparent 60%);
  pointer-events:none;
}

.handBadge{
  display:flex; align-items:center; gap:10px;
  font-weight:700;
}
.handIcon{
  width:22px;height:22px;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));
}
.handSub{
  margin-top:10px;
  color: var(--muted);
  font-size:13px;
}

.handCard.quick{ border-color: rgba(49,209,125,.22); }
.handCard.arts{ border-color: rgba(88,166,255,.22); }
.handCard.buster{ border-color: rgba(255,77,77,.22); }

.handCount{
  display:flex; align-items:center; gap:6px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.03);
  margin-left:auto;
}
.handCount strong{ font-size:16px; }

/* ============================
   Painel de seleção
============================ */
.selectedBox{
  margin-top:14px;
  border:1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  background: rgba(255,255,255,.03);
  padding:14px;
}
.selectedHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.selectedName{
  font-size:18px;
  font-weight:800;
}
.selectedDesc{
  margin-top:10px;
  color: var(--muted);
  font-size:14px;
  line-height:1.4;
}

/* ============================
   Adaptação (d6=5 opção A)
============================ */
.adaptWrap{
  margin-top:14px;
  padding:12px;
  border:1px solid rgba(255,255,255,.08);
  border-radius:16px;
  background: rgba(255,255,255,.03);
}
.adaptRow{
  display:flex;
  gap:12px;
  align-items:center;
  margin-top:8px;
}
.adaptLabel{ color: var(--muted); font-size:13px; }
.adaptSelect{
  flex:1;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(20,20,28,.75);
  color: var(--text);
}
.adaptHint{
  margin-top:10px;
  color: var(--muted);
  font-size:12.5px;
  line-height:1.35;
}

/* ============================
   Magia gerada
============================ */
.spellBox{
  border:1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  background: rgba(255,255,255,.03);
  padding:14px;
}
.spellTitle{
  font-weight:800;
  margin-bottom:10px;
}
.spellSummary{
  color: var(--muted);
  font-size:13px;
  line-height:1.35;
}
.spellText{
  margin-top:10px;
  font-size:14px;
  line-height:1.5;
}


/* Escolha do d6: botões com título + descrição */
.choiceBtn{
  text-align: left;
  padding: 14px 16px;
  min-height: 74px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 6px;
}
.choiceTitle{
  font-weight: 700;
  letter-spacing: .2px;
}
.choiceDesc{
  font-size: 12px;
  opacity: .85;
  line-height: 1.25;
}
.choiceBtn.selected{
  outline: 2px solid rgba(88,166,255,.65);
  box-shadow: 0 0 0 6px rgba(88,166,255,.12);
}
