<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simulador — Cartas e Dados</title>
  <link rel="stylesheet" href="simulador.css?v=2" />
</head>
<body>
  <header class="top">
    <div class="wrap">
      <div class="brand">
        <div class="logo">F</div>
        <div>
          <h1>Simulador — Cartas e Dados</h1>
          <p>Mão de até 7 cartas + rolagem d6/d8/d10 do Sebastian</p>
        </div>
      </div>

      <nav class="nav">
        <a href="index.html">Voltar</a>
        <a href="#mao">Cartas</a>
        <a href="#dados">Dados</a>
        <a href="#resultado">Resultado</a>
      </nav>
    </div>
  </header>

  <main class="wrap">

    <section id="mao" class="cardSection">
      <h2>1) Cartas na mão (até 7)</h2>
      <p class="muted">
        As cartas são a disponibilidade do turno. Você pode ter no máximo 7 cartas na mão.
        Você compra cartas aleatórias e escolhe qual carta vai usar.
      </p>
      <div class="handLimitControl">
        <label for="handLimit">Limite da mão</label>
        <input id="handLimit" type="number" min="1" max="12" value="7" />
      </div>
      <div class="grid2">
        <div class="panel">
          <h3>Comprar cartas</h3>

          <div class="rulesMini">
            <div class="ruleBox">
              <div class="ruleHead">
                <img class="ruleIcon" src="assets/card_buster.svg" alt="Buster"/>
                <div class="ruleName">Buster</div>
              </div>
              <div class="ruleDesc">Buster foca em um inimigo (um alvo).</div>
            </div>

            <div class="ruleBox">
              <div class="ruleHead">
                <img class="ruleIcon" src="assets/card_quick.svg" alt="Quick"/>
                <div class="ruleName">Quick</div>
              </div>
              <div class="ruleDesc">Quick foca em vários alvos (magia em área).</div>
            </div>

            <div class="ruleBox">
              <div class="ruleHead">
                <img class="ruleIcon" src="assets/card_arts.svg" alt="Arts"/>
                <div class="ruleName">Arts</div>
              </div>
              <div class="ruleDesc">Arts causa um efeito em um alvo.</div>
            </div>
          </div>

          <div class="deckArea">
            <div id="deck" class="deck" aria-label="Baralho">
              <div class="cardBack"></div>
              <div class="cardBack"></div>
              <div class="cardBack"></div>

              <div id="flyingCard" class="flyingCard" aria-hidden="true">
                <div class="cardFace">
                  <div class="cardTitle">Carta</div>
                  <div class="cardType">???</div>
                  <div class="cardMark">FATE</div>
                </div>
              </div>
            </div>

            <div class="controls">
              <button id="newTurnBtn" class="btn primary">Novo turno (comprar até 7)</button>
              <button id="drawOneBtn" class="btn">Comprar 1 carta</button>
              <button id="resetBtn" class="btn">Reset</button>

              <label class="toggle">
                <input id="soundToggle" type="checkbox" checked />
                <span>Som</span>
              </label>

              <div class="handCount">
                <span>Cartas na mão:</span>
                <strong id="handCount">0</strong><span>/7</span>
              </div>
            </div>
          </div>

          <div class="hint">
            Você escolhe a carta usada. Depois de usar, role os dados.
          </div>
        </div>

        <div class="panel">
          <h3>Sua mão</h3>
          <p class="muted">Clique em uma carta para selecionar. Depois clique em “Usar carta selecionada”.</p>

          <div id="handGrid" class="handGrid" aria-label="Mão de cartas"></div>

          <div class="selectedBox">
            <div class="selectedHeader">
              <div>
                <div class="k">Carta selecionada</div>
                <div id="selectedName" class="selectedName">—</div>
              </div>
              <button id="useCardBtn" class="btn primary" disabled>Usar carta selecionada</button>
            </div>

            <div id="selectedDesc" class="selectedDesc">Selecione uma carta na mão para ver a descrição.</div>
          </div>
        </div>
      </div>
    </section>

    <section id="dados" class="diceSection">
      <h2>2) Girar dados</h2>
      <p class="muted">
        Depois de usar a carta, clique em “Girar dados”. O d8 define o método, o d10 define o momento,
        e o d6 abre a escolha tática. Se o d8 cair em “Elemental clássico”, um d6 extra define o elemento.
      </p>

      <div class="panel">
        <div class="diceRow">
          <div class="dieBox">
            <div class="dieLabel">d6</div>
            <div id="die6" class="die">—</div>
          </div>
          <div class="dieBox">
            <div class="dieLabel">d8</div>
            <div id="die8" class="die">—</div>
          </div>
          <div class="dieBox">
            <div class="dieLabel">d10</div>
            <div id="die10" class="die">—</div>
          </div>

          <div id="dieElemBox" class="dieBox hidden">
            <div class="dieLabel">d6 (elemento)</div>
            <div id="dieElem" class="die">—</div>
          </div>
        </div>

        <div class="controls">
          <button id="rollBtn" class="btn primary" disabled>Girar dados</button>
        </div>

        <div class="hint">
          A escolha do d6 acontece no passo 3, junto do resultado.
        </div>
      </div>
    </section>

    <section id="resultado" class="resultSection">
      <h2>3) Resultado</h2>

      <div class="panel">
        <div class="resultBlock">
          <div class="resultTitle">Combinação</div>
          <div id="comboLine" class="resultMain">Escolha uma carta e role os dados.</div>
          <div id="comboSub" class="resultSub"></div>
        </div>

        <div class="divider"></div>

        <div class="resultDetails">
          <div class="detail">
            <div class="k">Carta</div>
            <div class="v" id="outCard">—</div>
          </div>
          <div class="detail">
            <div class="k">d8</div>
            <div class="v" id="outD8">—</div>
          </div>
          <div class="detail">
            <div class="k">d6</div>
            <div class="v" id="outD6">—</div>
          </div>
          <div class="detail">
            <div class="k">d10</div>
            <div class="v" id="outD10">—</div>
          </div>
          <div class="detail">
            <div class="k">Elemento</div>
            <div class="v" id="outElem">—</div>
          </div>
        </div>

        <div class="divider"></div>

        <div id="d6Choice" class="choice hidden">
          <h3>Escolha do d6</h3>

          <div id="preChoiceInfo" class="preChoiceInfo">
            <div class="preTitle">Resultados antes da escolha:</div>
            <div class="preLines" id="preLines">Role os dados para ver.</div>
          </div>

          <p class="muted" id="d6ChoiceHint">Role os dados para aparecerem as opções.</p>

          <div class="choiceGrid">
            <button id="optA" class="btn choiceBtn"></button>
            <button id="optB" class="btn choiceBtn"></button>
          </div>

          <div id="adaptWrap" class="adaptWrap hidden">
            <div class="k">Adaptação ativa</div>
            <div class="adaptRow">
              <label for="adaptMethod" class="adaptLabel">Reinterpretar d8 como:</label>
              <select id="adaptMethod" class="adaptSelect"></select>
            </div>
            <div class="adaptHint">
              Adaptação (d6=5) permite reinterpretar o resultado do d8 de forma coerente.
              Se escolher “Elemental clássico”, o simulador define um elemento por d6 extra.
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="spellBox">
          <div class="spellTitle">Magia gerada</div>
          <div id="spellSummary" class="spellSummary">—</div>
          <div id="spellText" class="spellText">A descrição aparece depois que você escolher a opção do d6.</div>
        </div>

        <div class="note">
          O simulador não resolve acerto/falha e não substitui a decisão do mestre.
          Ele só organiza a combinação e gera uma descrição temática.
        </div>
      </div>
    </section>

    <section class="panel">
      <h2>Regras do Sebastian (tabelas para consulta)</h2>
      <p class="muted">
        Exibição das tabelas (d8, d6, d10) conforme a versão final definida para o personagem.
      </p>

      <details>
        <summary>Ver tabelas completas (d8, d6, d10)</summary>
        <div class="tables">
          <div>
            <h3>d8 — Método Taumatúrgico</h3>
            <ol id="tableD8"></ol>
          </div>

          <div>
            <h3>d6 — Escolha Tática</h3>
            <div id="tableD6"></div>
          </div>

          <div>
            <h3>d10 — Momento de Destaque</h3>
            <ol id="tableD10"></ol>
          </div>
        </div>
      </details>
    </section>
  </main>

  <footer class="footer">
    <div class="wrap">
      <span>Fate RPG — Simulador de Mesa</span>
    </div>
  </footer>

  <script src="magia.js?v=2"></script>
  <script src="simulador.js?v=2"></script>
</body>
</html>
